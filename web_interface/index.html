<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewSight AR Navigation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Full Screen Camera View -->
    <div class="camera-container">
        <video id="videoFeed" autoplay playsinline></video>
        
        <!-- Camera Loading Overlay -->
        <div class="camera-loading" id="cameraLoading">
            <div class="loading-spinner"></div>
            <p>Starting camera...</p>
        </div>

        <!-- Status Indicators (Top Right) - Minimal -->
        <div class="status-indicators">
            <div class="status-dot" id="cameraStatusDot" title="Camera"></div>
            <div class="status-dot" id="gpsStatusDot" title="GPS"></div>
            <div class="status-dot" id="backendStatusDot" title="Backend"></div>
        </div>

        <!-- AR Navigation Overlay - Hidden by default -->
        <div class="ar-nav-overlay" id="arNavOverlay">
            
            <!-- Street Name (Top Center) -->
            <div class="street-name" id="streetName">
                Main Street
            </div>

            <!-- AR Arrows on Road (Center) -->
            <div class="ar-arrows-container">
                <div class="ar-distance" id="arDistance">150 m</div>
                <div class="ar-arrows" id="arArrows">
                    <svg class="arrow-svg" viewBox="0 0 100 100">
                        <use href="#ar-arrow-straight" id="arrowIcon"></use>
                    </svg>
                    <svg class="arrow-svg" viewBox="0 0 100 100">
                        <use href="#ar-arrow-straight"></use>
                    </svg>
                    <svg class="arrow-svg" viewBox="0 0 100 100">
                        <use href="#ar-arrow-straight"></use>
                    </svg>
                </div>
            </div>

            <!-- Instruction Text (Below Arrows) -->
            <div class="ar-instruction" id="arInstruction">
                Continue straight
            </div>

            <!-- Bottom Info Bar -->
            <div class="ar-bottom-bar">
                <!-- Progress -->
                <div class="ar-progress">
                    Step <span id="stepCurrent">1</span>/<span id="stepTotal">5</span>
                </div>

                <!-- Destination Info -->
                <div class="ar-destination">
                    <div class="destination-icon">üìç</div>
                    <div class="destination-info">
                        <div class="destination-time" id="destTime">5 min</div>
                        <div class="destination-distance" id="destDistance">0.8 mi</div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="ar-controls">
                    <button class="ar-control-btn" id="prevBtn" title="Previous">‚èÆ</button>
                    <button class="ar-control-btn stop" id="stopBtn" title="Stop">‚èπ</button>
                    <button class="ar-control-btn" id="nextBtn" title="Next">‚è≠</button>
                </div>
            </div>
        </div>

        <!-- Voice Button (Center Bottom) - Visible when NOT navigating -->
        <div class="voice-button-container" id="voiceButtonContainer">
            <button class="voice-button" id="voiceBtn">
                <svg class="voice-icon" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                    <path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                </svg>
                <span class="voice-text" id="voiceText">Say Destination</span>
            </button>
            
            <!-- Transcript Display -->
            <div class="voice-transcript" id="voiceTranscript">
                Listening...
            </div>
        </div>
    </div>

    <!-- Toast Messages -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner large"></div>
        <p id="loadingText">Processing...</p>
    </div>

    <!-- SVG Arrow Definitions for AR -->
    <svg style="display: none;">
        <defs>
            <!-- Straight Arrow - Bold Chevron Up -->
            <g id="ar-arrow-straight">
                <path fill="currentColor" 
                      d="M 50 20 L 75 45 L 68 52 L 50 34 L 32 52 L 25 45 Z"/>
            </g>
            
            <!-- Right Arrow - Clear Bold -->
            <g id="ar-arrow-right">
                <path fill="currentColor" 
                      d="M 20 43 L 60 43 L 60 35 L 80 50 L 60 65 L 60 57 L 20 57 Z"/>
            </g>
            
            <!-- Left Arrow - Clear Bold -->
            <g id="ar-arrow-left">
                <path fill="currentColor" 
                      d="M 80 43 L 40 43 L 40 35 L 20 50 L 40 65 L 40 57 L 80 57 Z"/>
            </g>
            
            <!-- Slight Right - Angled Chevron -->
            <g id="ar-arrow-slight-right">
                <path fill="currentColor" 
                      d="M 30 65 L 55 25 L 62 30 L 40 65 L 48 73 L 42 78 Z"/>
            </g>
            
            <!-- Slight Left - Angled Chevron -->
            <g id="ar-arrow-slight-left">
                <path fill="currentColor" 
                      d="M 70 65 L 45 25 L 38 30 L 60 65 L 52 73 L 58 78 Z"/>
            </g>
            
            <!-- Sharp Right - 90 Degree Turn -->
            <g id="ar-arrow-sharp-right">
                <path fill="currentColor" 
                      d="M 25 25 L 35 25 L 35 55 L 60 55 L 60 47 L 75 60 L 60 73 L 60 65 L 25 65 Z"/>
            </g>
            
            <!-- Sharp Left - 90 Degree Turn -->
            <g id="ar-arrow-sharp-left">
                <path fill="currentColor" 
                      d="M 75 25 L 65 25 L 65 55 L 40 55 L 40 47 L 25 60 L 40 73 L 40 65 L 75 65 Z"/>
            </g>
            
            <!-- U-Turn - Bold Curved Arrow -->
            <g id="ar-arrow-uturn">
                <path fill="currentColor" 
                      d="M 60 75 C 60 75, 60 60, 50 60 C 40 60, 40 75, 40 75 L 40 25 L 32 25 L 50 10 L 68 25 L 60 25 Z"/>
            </g>
        </defs>
    </svg>

    <script src="app.js"></script>
</body>
</html>
